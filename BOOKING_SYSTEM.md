# Система бронирования времени

## Возможности

### 1. Бронирование времени (для ответственных лиц)
- Кнопка "Забронировать время" доступна всем неадминистраторам
- Заполнение формы с названием, датой, временем начала/конца и описанием
- Заявка автоматически отправляется администратору на подтверждение
- Статусы заявок: `pending` (ожидает), `approved` (одобрена), `rejected` (отклонена)
- ✅ **Адаптивный дизайн**: корректное отображение на мобильных устройствах

### 2. Подтверждение заявок (для администраторов)
- Раздел "Заявки на бронирование" отображается только администраторам
- Администратор видит все заявки со статусом `pending`
- Возможность одобрить ✓ или отклонить ✗ заявку
- При одобрении автоматически создается событие типа "Встреча" в графике
- ✅ **Мобильная версия**: на экранах < 640px кнопки показывают текст "Одобрить"/"Отклонить"

### 3. Автоматическая и ручная архивация событий
- **Автоматическая**: события переходят в архив после окончания (проверка каждую минуту)
- **Ручная**: кнопка "Архивировать прошедшие" для админа (архивирует только прошедшие события)
- Учитывается дата окончания и время окончания события
- Статус меняется с `scheduled`/`in-progress` на `archived`
- ✅ **Исправлена проблема** с бесконечным циклом обновлений (убрана зависимость от `events` в `useEffect`)

### 4. Исправлена проблема с редактированием
- При открытии диалога редактирования все поля заполняются текущими значениями
- Данные обновляются корректно при сохранении (используется spread `{...editingEvent, ...eventData}`)
- Используется `useEffect` для синхронизации состояния с props
- ✅ Диалог закрывается автоматически после успешного сохранения

## Статусы событий

- `scheduled` - запланировано
- `in-progress` - в процессе
- `completed` - завершено (вручную)
- `cancelled` - отменено
- `archived` - автоматически архивировано (NEW)
- `pending` - ожидает подтверждения (NEW)

## Роли пользователей

- `admin` - администратор (может создавать события, подтверждать заявки)
- `responsible` - ответственное лицо (может бронировать время)
- `guest` - гость (только просмотр)

## Компоненты

1. **BookingDialog** - форма бронирования времени
2. **BookingRequests** - список заявок для администратора
3. Обновлен **EventDialog** - исправлено редактирование
4. Обновлен **Index.tsx** - добавлена логика бронирования и автоархивации